#!/bin/csh
#
# Sample Batch Script for a SGI Altix MPI job
#
# Submit this script using the command: qsub mpi.pbs
#
# Use the "qstat" command to check the status of a job.
#
# The following are embedded QSUB options. The syntax is #PBS (the # does
# _not_ denote that the lines are commented out so do not remove).
#
#
# Set maximum wallclock time (hh:mm:ss)
#PBS -l walltime=48:00:00

# Set memory limit to 1000 Mbytes
##PBS -l pmem=10gb

# Request 1 processor
##PBS -A jle7_a_g_sc_default   
#PBS -l nodes=1:ppn=20:scivybridge

#PBS -A open
##PBS -l nodes=1:ppn=20:himem

# Queue name (see info about other queues in web documentation)
#PBS -V
#
# Charge job to project (recommended for users with multiple projects)
# [If project is invalid, a valid project will be automatically selected]
##PBS -A TG-ATM100040
#
# Job name (default = name of script file)
#PBS -N JOB_NAME
#
# Filename for standard output (default = <job_name>.o<job_id>)
##PBS -o matlab_run.out
#
# Filename for standard error (default = <job_name>.e<job_id>)
##PBS -e matlab_run.err
#
#PBS -oe
#
## Send mail when the job begins and ends (optional)
##PBS -m be
#------------------------------
# End of embedded QSUB options

#set echo # echo commands before execution; use for debugging

# Go to the job scratch directory

##cd /storage/home/hlh189/scratch/WRF/WRFV3/run_test_flat/
##cd /storage/home/hlh189/work/Codes_OffshoreMax/
cd /gpfs/group/jle7/default/kmn18/graduateresearch/matlabcodes/TAMS_precip_IMERGV6/

# Insert where script finds source for modules needed  
##source /opt/aci/modulefiles/Core
#module purge
module load matlab#/R2016a
limit coredumpsize 0
limit stacksize unlimited

# Run the MPI program on all nodes/processors requested by the job
# (program reads from input.8.10 and writes to output.8.10)
#matlab-bin -nodisplay -nosplash -r MATLAB_SCRIPT_NAME
matlab -nodisplay -nosplash -r MATLAB_SCRIPT_NAME


